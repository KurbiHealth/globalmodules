<!--
https://github.com/alexk111/ngImgCrop
http://jsfiddle.net/xxo3sk41/1/
https://github.com/danialfarid/ng-file-upload
-->

<div class="row" ng-controller="UploadController">
	<div class="col-md-12 path-details-container">
		
		<div class="path-details-header table">
			<div class="table-center">
				<h1>CHOOSE AN IMAGE FOR UPLOAD</h1>
				<button class="btn btn-default" ng-click="cancel($event)">Cancel</button>
			</div>
			<div class="clear"></div>
		</div><!--END /.path-details-header-->

		<input type="file" ng-model="myKurbiFile" accept="image/*">

		<img ngf-thumbnail="myKurbiFile || '/thumb.jpg'" ng-model="myKurbiFile">

		<div class="path-details-submit">
			<div class="form-row">
				<button type="submit" class="btn btn-default" ng-click="saveUploadedFile(myKurbiFile)">Submit</button>
			</div>
		</div>

		<hr/>

		
<style>
.cropArea {
    background: #E4E4E4;
    overflow: hidden;
    width:500px;
    height:350px;
}
form .progress {
    line-height: 15px;
}
.progress {
    display: inline-block;
    width: 100px;
    border: 3px groove #CCC;
}
.progress div {
    font-size: smaller;
    background: orange;
    width: 0;
}
</style>
		<form name="myForm">
	        <div>Crop Image and Upload</div>
	        <button ngf-select ng-model="picFile" accept="image/*">
	            Select Picture</button>
	        <div ngf-drop ng-model="picFile" ngf-pattern="image/*"
	             class="cropArea">
	            <img-crop image="picFile  | ngfDataUrl"                 
	            result-image="croppedDataUrl" ng-init="croppedDataUrl=''">
	            </img-crop>
	        </div>
	        <div>
	            <img ng-src="{{croppedDataUrl}}" />
	        </div>
	        <button ng-click="upload(croppedDataUrl)">Submit</button> 
	            
	        <span class="progress" ng-show="progress >= 0">
	          <div style="width:{{progress}}%" ng-bind="progress + '%'"></div>
	        </span>
	        <span ng-show="result">Upload Successful</span>
	        <span class="err" ng-show="errorMsg">{{errorMsg}}</span>
	    </form>
		
	</div><!--END /.path-details-container-->
</div><!--END /.row-->